<md-tabs md-dynamic-height>
    <md-tab label="overview">
        <md-content class="md-padding">
            <section layout="row" layout-align="center">
                <md-card ng-repeat="questionnaire in controller.allQuestionnaires"
                         class="wmg-result-card">
                    <md-card-content>
                        <h2 class="wmg-result-card__heading">{{questionnaire.metadata.title}}</h2>

                        <h4>({{questionnaire.age.label}})</h4>

                        <div class="wmg-result-card__flag-container" ng-class="{
                              'wmg-red': questionnaire.result === 'RED_FLAG',
                              'wmg-amber': questionnaire.result === 'AMBER_FLAG',
                              'wmg-no': questionnaire.result === 'NO_FLAG'}">
                            <i class="material-icons">flag</i>

                            <div ng-switch="questionnaire.result">
                                <span ng-switch-when="RED_FLAG">Red Flag</span>
                                <span ng-switch-when="AMBER_FLAG">Amber Flag</span>
                                <span ng-switch-when="NO_FLAG">No Concerns</span>
                                <span ng-switch-when="INCOMPLETE">Not Completed</span>
                            </div>
                        </div>
                    </md-card-content>
                </md-card>
            </section>

            <div>
                <div>
                    <p>
                        If PEDS or Q-CHAT-10 have a "Red Flag" result, we recommend that you consult your paediatrician.
                    </p>

                    <h3>Relevant Links:</h3>
                    <md-button class="md-primary md-raised"
                               href="http://www.resourcingparents.nsw.gov.au/page/love-talk-sing-read-play">
                        PHR anticipatory guidelines
                    </md-button>
                    <md-button class="md-raised md-primary" href="http://raisingchildren.net.au/">raisingchildren.net.au</md-button>
                </div>
            </div>
        </md-content>
    </md-tab>

    <md-tab ng-repeat="questionnaire in controller.getCompletedQuestionnaires() track by questionnaire.metadata.id"
            label="Answers for {{questionnaire.metadata.title}}">
        <md-content>
            <table>
                <thead>
                <tr>
                    <th>Question</th>
                    <th>Answer</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat-start="question in questionnaire.questions track by question.metadata.id"
                    class="wmg-answer-row"
                    ng-class="{
                      'wmg-answer-row--red': question.answer.metadata.redFlagQuestion,
                      'wmg-answer-row--amber': question.answer.metadata.amberFlagQuestion
                    }">
                    <td>{{question.metadata.text}}</td>
                    <td>{{question.answer.metadata.text}}</td>
                </tr>
                <tr ng-if="question.answer.comments" ng-repeat-end>
                    <td colspan="2">Comments: {{question.answer.comments}}</td>
                </tr>
                </tbody>
            </table>
        </md-content>
    </md-tab>
</md-tabs>